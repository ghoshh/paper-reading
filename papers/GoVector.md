- 可以把基于图的ANNS看成两个阶段，第一个阶段是快速逼近查询向量，扩展的点离查询向量距离越来越近，当找到了最近的后，进入第二个阶段，这个阶段扩展的点仍然局限在查询邻域附近，到查询向量的距离通常在一个范围内波动。可以理解成这个阶段扩展的点位于以查询向量为中心的一个环里。
- DiskANN是静态缓存，缓存了起点出发几跳内的邻居节点。因为每次搜索都从同一个起点出发，所以刚开始搜索的时候缓存命中率很高，但是进入第二个阶段，命中率就很低了。
- ![[GoVectore-figure4.png]]
- GOVector在静态缓存的基础上加了动态缓存，第一阶段也是用静态缓存，到了第二阶段，查询发现一个点不在缓存里，不止加载自己，顺便把与它相似的整页点一起读进来，优化了磁盘存储的结构，做到了顺序读。
- 整体流程：拿候选集里最近的点来扩展，要是没命中缓存，在第一阶段就把点所在的一页读出来，在第二阶段就把读出来和它相似的几个磁盘页。读出来后加载到内存，算精确距离，并根据PQ距离将邻居插入候选集。
- 基于向量相似性的重排：先Kmeans聚类，同一簇内的向量在空间上距离接近。然后再优化每个簇内向量在页上的排列顺序。把离中心近的放到一页，放不下的边缘的节点放到下一页。
- 缓存达到上限时，用LFU（最不经常使用）方法删除最不常用的页。
- 第一阶段和第二阶段的缓存策略不一样，需要识别出来阶段切换时机，引入了θ(0<θ<1)当候选集的top(θk)个候选都被展开了，就认为到达第二阶段了，
- 